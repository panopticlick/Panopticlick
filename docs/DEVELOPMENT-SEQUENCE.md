# Panopticlick.org - å¼€å‘é¡ºåºä¸æ‰§è¡Œè·¯å¾„

> **åŸåˆ™**: å…ˆæ­éª¨æ¶ï¼Œå†é€ çµé­‚ï¼Œæœ€åæ‰“ç£¨çš®è‚¤ã€‚

---

## æ€»ä½“å¼€å‘ç­–ç•¥

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         å¼€å‘é˜¶æ®µæ€»è§ˆ                                      â”‚
â”‚                                                                          â”‚
â”‚  Week 1        Week 2        Week 3        Week 4        Week 5         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ Phase 0â”‚   â”‚ Phase 1â”‚   â”‚ Phase 2â”‚   â”‚ Phase 3â”‚   â”‚ Phase 4â”‚        â”‚
â”‚  â”‚ åŸºç¡€è®¾æ–½ â”‚   â”‚ æ ¸å¿ƒæ£€æµ‹ â”‚   â”‚ é¦–é¡µé­”æ³• â”‚   â”‚ RTBæ¨¡æ‹Ÿ â”‚   â”‚ æ”¶å°¾å‘å¸ƒ â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                          â”‚
â”‚  Monorepo      SDK          Homepage      RTB Full      Polish          â”‚
â”‚  CI/CD         Collectors   Redacted UI   Supercookie   SEO             â”‚
â”‚  D1 Schema     Entropy      Valuation     Defense       Performance     â”‚
â”‚  Design System API Routes   Animation     Guides        Launch          â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Phase 0: åŸºç¡€è®¾æ–½æ­å»º (Foundation)

### ç›®æ ‡
å»ºç«‹å¯å·¥ä½œçš„å¼€å‘ç¯å¢ƒï¼Œç¡®ä¿æ‰€æœ‰å›¢é˜Ÿæˆå‘˜å¯ä»¥å¼€å§‹ç¼–ç ã€‚

### æ‰§è¡Œé¡ºåº

```
Step 0.1: åˆ›å»º Monorepo éª¨æ¶
â”œâ”€â”€ åˆå§‹åŒ– pnpm workspace
â”œâ”€â”€ é…ç½® Turborepo
â”œâ”€â”€ åˆ›å»ºç›®å½•ç»“æ„
â””â”€â”€ é…ç½® TypeScript è·¯å¾„åˆ«å

Step 0.2: é…ç½® Next.js åº”ç”¨
â”œâ”€â”€ åˆ›å»º apps/web
â”œâ”€â”€ å®‰è£… Tailwind CSS 4
â”œâ”€â”€ é…ç½® Cloudflare adapter
â””â”€â”€ è®¾ç½®å¼€å‘è„šæœ¬

Step 0.3: é…ç½® Cloudflare Worker
â”œâ”€â”€ åˆ›å»º workers/api
â”œâ”€â”€ åˆå§‹åŒ– Hono.js
â”œâ”€â”€ é…ç½® wrangler.toml
â””â”€â”€ ç»‘å®š D1 å’Œ KV

Step 0.4: è®¾è®¡ç³»ç»ŸåŸºç¡€
â”œâ”€â”€ é…ç½® Tailwind ä¸»é¢˜è‰²
â”œâ”€â”€ å®‰è£… shadcn/ui æ ¸å¿ƒç»„ä»¶
â”œâ”€â”€ è®¾ç½®å­—ä½“ (Merriweather + JetBrains Mono)
â””â”€â”€ åˆ›å»º CSS å˜é‡

Step 0.5: CI/CD ç®¡é“
â”œâ”€â”€ GitHub Actions workflow
â”œâ”€â”€ Cloudflare Pages éƒ¨ç½²
â”œâ”€â”€ é¢„è§ˆç¯å¢ƒé…ç½®
â””â”€â”€ è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶
```

### è¯¦ç»†å‘½ä»¤

```bash
# Step 0.1: Monorepo åˆå§‹åŒ–
mkdir panopticlick.org && cd panopticlick.org

# åˆå§‹åŒ– pnpm
pnpm init

# åˆ›å»ºå·¥ä½œåŒºé…ç½®
cat > pnpm-workspace.yaml << 'EOF'
packages:
  - 'apps/*'
  - 'packages/*'
  - 'workers/*'
EOF

# åˆ›å»ºç›®å½•ç»“æ„
mkdir -p apps/web packages/{fingerprint-sdk,valuation-engine,types} workers/api docs migrations scripts

# å®‰è£… Turborepo
pnpm add -D turbo

# åˆ›å»º turbo.json
cat > turbo.json << 'EOF'
{
  "$schema": "https://turbo.build/schema.json",
  "tasks": {
    "build": {
      "dependsOn": ["^build"],
      "outputs": [".next/**", "dist/**", ".wrangler/**"]
    },
    "dev": {
      "cache": false,
      "persistent": true
    },
    "lint": {},
    "typecheck": {
      "dependsOn": ["^build"]
    },
    "test": {
      "dependsOn": ["build"]
    }
  }
}
EOF
```

```bash
# Step 0.2: Next.js åº”ç”¨
cd apps/web

# åˆ›å»º Next.js é¡¹ç›®
pnpm create next-app@latest . \
  --typescript \
  --tailwind \
  --eslint \
  --app \
  --src-dir \
  --import-alias "@/*" \
  --no-git

# å®‰è£… Cloudflare adapter
pnpm add @opennextjs/cloudflare

# å®‰è£…æ ¸å¿ƒä¾èµ–
pnpm add framer-motion zustand lucide-react recharts
pnpm add -D @types/node

# é…ç½® next.config.js
cat > next.config.js << 'EOF'
/** @type {import('next').NextConfig} */
const nextConfig = {
  output: 'export',
  images: { unoptimized: true },
  experimental: {
    optimizePackageImports: ['lucide-react', 'framer-motion'],
  },
};

module.exports = nextConfig;
EOF
```

```bash
# Step 0.3: Cloudflare Worker
cd ../../workers/api

# åˆå§‹åŒ– package.json
cat > package.json << 'EOF'
{
  "name": "@panopticlick/api",
  "private": true,
  "scripts": {
    "dev": "wrangler dev",
    "deploy": "wrangler deploy",
    "typecheck": "tsc --noEmit"
  }
}
EOF

# å®‰è£…ä¾èµ–
pnpm add hono
pnpm add -D wrangler @cloudflare/workers-types typescript

# åˆ›å»º wrangler.toml
cat > wrangler.toml << 'EOF'
name = "panopticlick-api"
main = "src/index.ts"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

[[d1_databases]]
binding = "DB"
database_name = "panopticlick-db"
database_id = "YOUR_D1_ID_HERE"

[[kv_namespaces]]
binding = "KV"
id = "YOUR_KV_ID_HERE"

[vars]
ENVIRONMENT = "development"
EOF

# åˆ›å»ºå…¥å£æ–‡ä»¶
mkdir src
cat > src/index.ts << 'EOF'
import { Hono } from 'hono';
import { cors } from 'hono/cors';

type Bindings = {
  DB: D1Database;
  KV: KVNamespace;
};

const app = new Hono<{ Bindings: Bindings }>();

app.use('*', cors());

app.get('/', (c) => c.json({ status: 'ok', service: 'panopticlick-api' }));

app.get('/health', (c) => c.json({ healthy: true }));

export default app;
EOF
```

```bash
# Step 0.4: è®¾è®¡ç³»ç»Ÿ
cd ../../apps/web

# å®‰è£… shadcn/ui
npx shadcn-ui@latest init

# å®‰è£…æ ¸å¿ƒç»„ä»¶
npx shadcn-ui@latest add button card progress tabs tooltip badge

# æ›´æ–° tailwind.config.ts
cat > tailwind.config.ts << 'EOF'
import type { Config } from 'tailwindcss';

const config: Config = {
  darkMode: ['class'],
  content: [
    './src/**/*.{ts,tsx}',
  ],
  theme: {
    extend: {
      colors: {
        // The Bureau Palette
        paper: '#f4f4f5',
        'paper-dark': '#e4e4e7',
        ink: '#18181b',
        'ink-light': '#3f3f46',
        redaction: '#000000',
        highlight: '#fde047',
        evidence: '#3b82f6',
        safe: '#22c55e',
        warn: '#f59e0b',
        danger: '#ef4444',
        terminal: '#10b981',
        muted: '#71717a',
      },
      fontFamily: {
        serif: ['Merriweather', 'Georgia', 'serif'],
        mono: ['JetBrains Mono', 'Consolas', 'monospace'],
        sans: ['Inter', 'system-ui', 'sans-serif'],
      },
      animation: {
        'redact-reveal': 'redact-reveal 0.3s ease-out forwards',
        'bid-enter': 'bid-enter 0.5s ease-out',
        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
        'data-flow': 'data-flow 1.5s linear forwards',
      },
      keyframes: {
        'redact-reveal': {
          '0%': { backgroundColor: '#000', color: '#000' },
          '100%': { backgroundColor: 'transparent', color: '#18181b' },
        },
        'bid-enter': {
          '0%': { opacity: '0', transform: 'translateX(-20px)' },
          '100%': { opacity: '1', transform: 'translateX(0)' },
        },
        'data-flow': {
          '0%': { transform: 'translateX(0)', opacity: '0' },
          '20%': { opacity: '1' },
          '80%': { opacity: '1' },
          '100%': { transform: 'translateX(100%)', opacity: '0' },
        },
      },
    },
  },
  plugins: [require('tailwindcss-animate')],
};

export default config;
EOF
```

### Phase 0 æ£€æŸ¥æ¸…å•

- [ ] `pnpm install` åœ¨æ ¹ç›®å½•æˆåŠŸè¿è¡Œ
- [ ] `pnpm dev` å¯åŠ¨ Next.js åœ¨ localhost:3000
- [ ] `cd workers/api && pnpm dev` å¯åŠ¨ Worker åœ¨ localhost:8787
- [ ] Tailwind è‡ªå®šä¹‰é¢œè‰²å¯ç”¨ (`bg-paper`, `text-ink`, etc.)
- [ ] shadcn/ui Button ç»„ä»¶æ­£å¸¸æ¸²æŸ“
- [ ] GitHub Actions workflow æ–‡ä»¶å­˜åœ¨

---

## Phase 1: æ ¸å¿ƒæ£€æµ‹èƒ½åŠ› (Core Detection)

### ç›®æ ‡
å®ç°æµè§ˆå™¨æŒ‡çº¹æ”¶é›† SDKï¼Œå¹¶éƒ¨ç½²åŸºæœ¬ APIã€‚

### æ‰§è¡Œé¡ºåº

```
Step 1.1: Types Package
â”œâ”€â”€ å®šä¹‰ FingerprintPayload ç±»å‹
â”œâ”€â”€ å®šä¹‰ ValuationReport ç±»å‹
â”œâ”€â”€ å®šä¹‰ API è¯·æ±‚/å“åº”ç±»å‹
â””â”€â”€ å¯¼å‡ºæ‰€æœ‰ç±»å‹

Step 1.2: Fingerprint SDK - æ”¶é›†å™¨
â”œâ”€â”€ Canvas æ”¶é›†å™¨
â”œâ”€â”€ WebGL æ”¶é›†å™¨
â”œâ”€â”€ Audio æ”¶é›†å™¨
â”œâ”€â”€ Screen æ”¶é›†å™¨
â”œâ”€â”€ Timezone æ”¶é›†å™¨
â”œâ”€â”€ Navigator æ”¶é›†å™¨
â”œâ”€â”€ Fonts æ”¶é›†å™¨ (å¯é€‰ï¼Œè¾ƒæ…¢)
â””â”€â”€ ä¸»æ”¶é›†ç¼–æ’å™¨

Step 1.3: Fingerprint SDK - å“ˆå¸Œ
â”œâ”€â”€ SHA-256 å“ˆå¸Œå‡½æ•°
â”œâ”€â”€ ç¡¬ä»¶å“ˆå¸Œç»„åˆ
â”œâ”€â”€ è½¯ä»¶å“ˆå¸Œç»„åˆ
â””â”€â”€ å®Œæ•´å“ˆå¸Œç»„åˆ

Step 1.4: Valuation Engine - ç†µè®¡ç®—
â”œâ”€â”€ åŸºç¡€ç†µå€¼è¡¨
â”œâ”€â”€ åŠ¨æ€ç†µè®¡ç®—
â”œâ”€â”€ ç†µå€¼åˆ†è§£
â””â”€â”€ å”¯ä¸€æ€§ä¼°ç®—

Step 1.5: Valuation Engine - RTB æ¨¡æ‹Ÿ
â”œâ”€â”€ DSP é…ç½®æ•°æ®
â”œâ”€â”€ Persona æ¨æ–­è§„åˆ™
â”œâ”€â”€ å‡ºä»·ç”Ÿæˆç®—æ³•
â””â”€â”€ æ‹å–æ¨¡æ‹Ÿå™¨

Step 1.6: Worker API Routes
â”œâ”€â”€ POST /api/scan/start
â”œâ”€â”€ POST /api/scan/collect
â”œâ”€â”€ POST /api/rtb/simulate
â””â”€â”€ GET /api/stats/global
```

### å…³é”®ä»£ç ç‰‡æ®µ

```typescript
// packages/types/src/fingerprint.ts
export interface FingerprintPayload {
  meta: {
    sessionId: string;
    timestamp: number;
    collectDuration: number;
    sdkVersion: string;
  };

  hardware: {
    canvas: { hash: string; blocked: boolean } | null;
    webgl: {
      hash: string;
      vendor: string;
      renderer: string;
      blocked: boolean;
    } | null;
    audio: { hash: string; sampleRate: number; blocked: boolean } | null;
    screen: {
      width: number;
      height: number;
      colorDepth: number;
      pixelRatio: number;
    };
    cpu: number;
    memory: number | null;
  };

  software: {
    userAgent: string;
    platform: string;
    language: string;
    languages: string[];
    timezone: string;
    timezoneOffset: number;
    fonts: { hash: string; count: number } | null;
    cookiesEnabled: boolean;
    doNotTrack: string | null;
    darkMode: boolean;
  };

  capabilities: {
    localStorage: boolean;
    sessionStorage: boolean;
    indexedDB: boolean;
    webGL: boolean;
    webGL2: boolean;
    webRTC: boolean;
  };
}
```

```typescript
// packages/fingerprint-sdk/src/collectors/canvas.ts
export async function collectCanvas(): Promise<CanvasFingerprint | null> {
  try {
    const canvas = document.createElement('canvas');
    canvas.width = 280;
    canvas.height = 60;
    const ctx = canvas.getContext('2d');
    if (!ctx) return null;

    // ç»˜åˆ¶ç¡®å®šæ€§å›¾æ¡ˆ
    ctx.textBaseline = 'alphabetic';
    ctx.fillStyle = '#f60';
    ctx.fillRect(125, 1, 62, 20);

    ctx.fillStyle = '#069';
    ctx.font = '11pt "Times New Roman"';
    ctx.fillText('Cwm fjordbank glyphs vext quiz, ğŸ˜ƒ', 2, 15);

    ctx.fillStyle = 'rgba(102, 204, 0, 0.7)';
    ctx.font = '18pt Arial';
    ctx.fillText('Cwm fjordbank glyphs vext quiz, ğŸ˜ƒ', 4, 45);

    // æ¸å˜
    const gradient = ctx.createLinearGradient(0, 0, canvas.width, 0);
    gradient.addColorStop(0, 'red');
    gradient.addColorStop(0.5, 'green');
    gradient.addColorStop(1, 'blue');
    ctx.fillStyle = gradient;
    ctx.fillRect(0, 50, canvas.width, 10);

    const dataUrl = canvas.toDataURL();

    // æ£€æµ‹æ˜¯å¦è¢«é˜»æ­¢
    const blocked = dataUrl.length < 1000; // å¤ªçŸ­è¯´æ˜è¢«é˜»æ­¢

    const hash = await sha256(dataUrl);

    return { hash, blocked };
  } catch (e) {
    return null;
  }
}
```

```typescript
// packages/fingerprint-sdk/src/collector.ts
import { collectCanvas } from './collectors/canvas';
import { collectWebGL } from './collectors/webgl';
import { collectAudio } from './collectors/audio';
import { collectScreen } from './collectors/screen';
import { collectTimezone } from './collectors/timezone';
import { collectNavigator } from './collectors/navigator';
import { sha256 } from './hash';
import type { FingerprintPayload } from '@panopticlick/types';

export interface CollectorOptions {
  sessionId: string;
  timeout?: number;
  onProgress?: (collected: number, total: number) => void;
}

export async function collectFingerprint(
  options: CollectorOptions
): Promise<FingerprintPayload> {
  const startTime = Date.now();

  const { sessionId, timeout = 5000, onProgress } = options;

  // å¹¶è¡Œæ”¶é›†æ‰€æœ‰ä¿¡å·
  const collectors = [
    { name: 'canvas', fn: collectCanvas },
    { name: 'webgl', fn: collectWebGL },
    { name: 'audio', fn: collectAudio },
    { name: 'screen', fn: collectScreen },
    { name: 'timezone', fn: collectTimezone },
    { name: 'navigator', fn: collectNavigator },
  ];

  let completed = 0;

  const results = await Promise.allSettled(
    collectors.map(async ({ name, fn }) => {
      const result = await Promise.race([
        fn(),
        new Promise((_, reject) =>
          setTimeout(() => reject(new Error('Timeout')), timeout)
        ),
      ]);
      completed++;
      onProgress?.(completed, collectors.length);
      return { name, result };
    })
  );

  // ç»„è£…ç»“æœ
  const data: Record<string, any> = {};
  for (const r of results) {
    if (r.status === 'fulfilled') {
      data[r.value.name] = r.value.result;
    }
  }

  const collectDuration = Date.now() - startTime;

  return {
    meta: {
      sessionId,
      timestamp: Date.now(),
      collectDuration,
      sdkVersion: '1.0.0',
    },
    hardware: {
      canvas: data.canvas || null,
      webgl: data.webgl || null,
      audio: data.audio || null,
      screen: data.screen || { width: 0, height: 0, colorDepth: 0, pixelRatio: 1 },
      cpu: navigator.hardwareConcurrency || 0,
      memory: (navigator as any).deviceMemory || null,
    },
    software: {
      ...data.navigator,
      ...data.timezone,
      fonts: null, // å¯é€‰ï¼Œç¨åå®ç°
    },
    capabilities: {
      localStorage: !!window.localStorage,
      sessionStorage: !!window.sessionStorage,
      indexedDB: !!window.indexedDB,
      webGL: !!data.webgl,
      webGL2: !!document.createElement('canvas').getContext('webgl2'),
      webRTC: !!window.RTCPeerConnection,
    },
  };
}
```

### Phase 1 æ£€æŸ¥æ¸…å•

- [ ] `packages/types` å¯¼å‡ºæ‰€æœ‰ç±»å‹å®šä¹‰
- [ ] `packages/fingerprint-sdk` å¯ä»¥åœ¨æµè§ˆå™¨ä¸­æ”¶é›†æŒ‡çº¹
- [ ] Canvas/WebGL/Audio æ”¶é›†å™¨æ­£å¸¸å·¥ä½œ
- [ ] SHA-256 å“ˆå¸Œä¸€è‡´æ€§éªŒè¯
- [ ] `packages/valuation-engine` ç†µè®¡ç®—è¾“å‡ºåˆç†å€¼
- [ ] RTB æ¨¡æ‹Ÿå™¨ç”Ÿæˆæœ‰æ„ä¹‰çš„å‡ºä»·
- [ ] Worker `/api/scan/start` è¿”å› sessionId
- [ ] Worker `/api/scan/collect` å¤„ç†æŒ‡çº¹æ•°æ®

---

## Phase 2: é¦–é¡µé­”æ³• (The Mirror)

### ç›®æ ‡
å®ç°é¦–é¡µçš„æ ¸å¿ƒä½“éªŒï¼šRedacted æ•ˆæœã€ä¼°å€¼å¡ç‰‡ã€è¿·ä½  RTB é¢„è§ˆã€‚

### æ‰§è¡Œé¡ºåº

```
Step 2.1: å¸ƒå±€ç»„ä»¶
â”œâ”€â”€ Header å¯¼èˆª
â”œâ”€â”€ Footer
â”œâ”€â”€ PageLayout å®¹å™¨
â””â”€â”€ å“åº”å¼ç½‘æ ¼

Step 2.2: Redacted ç»„ä»¶ (æƒ…æ„Ÿæ ¸å¿ƒ)
â”œâ”€â”€ RedactedText åŸºç¡€ç»„ä»¶
â”œâ”€â”€ æ‚¬åœè§£å¯†åŠ¨ç”»
â”œâ”€â”€ æ•æ„Ÿåº¦çº§åˆ«æ ·å¼
â””â”€â”€ æ— éšœç¢æ”¯æŒ

Step 2.3: ä¼°å€¼å±•ç¤ºç»„ä»¶
â”œâ”€â”€ ValuationCard
â”œâ”€â”€ EntropyGauge
â”œâ”€â”€ PersonaTags
â””â”€â”€ DefenseRing

Step 2.4: RTB è¿·ä½ é¢„è§ˆ
â”œâ”€â”€ BidCard ç»„ä»¶
â”œâ”€â”€ ç®€åŒ–ç‰ˆæ‹å–åŠ¨ç”»
â””â”€â”€ å®æ—¶æ›´æ–°æ•ˆæœ

Step 2.5: é¦–é¡µæ•´åˆ
â”œâ”€â”€ Hero Section (Redacted å±•ç¤º)
â”œâ”€â”€ Live Auction Section
â”œâ”€â”€ Market Value Section
â”œâ”€â”€ Defense Summary Section
â””â”€â”€ CTA to Deep Scan

Step 2.6: æ‰«ææµç¨‹
â”œâ”€â”€ ConsentGate ç»„ä»¶
â”œâ”€â”€ ScanProgress è¿›åº¦æ¡
â”œâ”€â”€ ç»“æœæ˜¾ç¤ºé¢æ¿
â””â”€â”€ é”™è¯¯å¤„ç†
```

### å…³é”®ç»„ä»¶å®ç°

```tsx
// components/redacted/redacted-text.tsx
'use client';

import { useState, useCallback } from 'react';
import { motion, AnimatePresence } from 'framer-motion';
import { cn } from '@/lib/utils';

interface RedactedTextProps {
  children: React.ReactNode;
  sensitivity?: 'low' | 'medium' | 'high';
  className?: string;
  onReveal?: () => void;
}

export function RedactedText({
  children,
  sensitivity = 'medium',
  className,
  onReveal,
}: RedactedTextProps) {
  const [revealed, setRevealed] = useState(false);

  const handleReveal = useCallback(() => {
    if (!revealed) {
      setRevealed(true);
      onReveal?.();
    }
  }, [revealed, onReveal]);

  const sensitivityColors = {
    low: 'bg-zinc-700',
    medium: 'bg-black',
    high: 'bg-red-900',
  };

  return (
    <span
      className={cn(
        'relative inline-block font-mono rounded-sm cursor-pointer',
        'transition-all duration-300 ease-out',
        'focus:outline-none focus-visible:ring-2 focus-visible:ring-highlight',
        !revealed && [
          sensitivityColors[sensitivity],
          'text-transparent select-none px-1 py-0.5',
        ],
        revealed && 'bg-highlight/20 text-ink px-1 py-0.5',
        className
      )}
      onMouseEnter={handleReveal}
      onClick={handleReveal}
      onKeyDown={(e) => e.key === 'Enter' && handleReveal()}
      role="button"
      tabIndex={0}
      aria-label={revealed ? undefined : 'Classified. Hover or click to reveal.'}
    >
      {children}

      {/* è§£å¯†åŠ¨ç”»é®ç½© */}
      <AnimatePresence>
        {!revealed && (
          <motion.span
            initial={{ opacity: 1 }}
            exit={{
              scaleX: 0,
              transition: { duration: 0.3, ease: 'easeOut' },
            }}
            className={cn(
              'absolute inset-0 rounded-sm origin-left',
              sensitivityColors[sensitivity]
            )}
          />
        )}
      </AnimatePresence>

      {/* æ‚¬åœæç¤º */}
      {!revealed && (
        <span className="absolute inset-0 flex items-center justify-center">
          <span className="text-xs text-highlight/80 opacity-0 hover:opacity-100 transition-opacity font-sans">
            [CLASSIFIED]
          </span>
        </span>
      )}
    </span>
  );
}
```

```tsx
// components/valuation/valuation-card.tsx
'use client';

import { motion } from 'framer-motion';
import { DollarSign, TrendingUp, Users } from 'lucide-react';
import { cn } from '@/lib/utils';

interface ValuationCardProps {
  cpm: number;
  persona: string;
  trackabilityScore: number;
  loading?: boolean;
}

export function ValuationCard({
  cpm,
  persona,
  trackabilityScore,
  loading,
}: ValuationCardProps) {
  const getTier = (score: number) => {
    if (score >= 80) return { label: 'EXPOSED', color: 'danger', bg: 'bg-danger' };
    if (score >= 50) return { label: 'PARTIAL', color: 'warn', bg: 'bg-warn' };
    return { label: 'PROTECTED', color: 'safe', bg: 'bg-safe' };
  };

  const tier = getTier(trackabilityScore);

  return (
    <motion.div
      initial={{ opacity: 0, y: 20 }}
      animate={{ opacity: 1, y: 0 }}
      className="border-2 border-ink bg-paper p-6 space-y-6"
    >
      {/* å¤´éƒ¨ */}
      <div className="flex items-center justify-between">
        <h3 className="font-serif text-xl font-bold flex items-center gap-2">
          <DollarSign className="h-5 w-5" />
          Your Market Value
        </h3>
        <span
          className={cn(
            'px-2 py-1 text-xs font-bold uppercase tracking-wider',
            tier.color === 'danger' && 'bg-danger text-white',
            tier.color === 'warn' && 'bg-warn text-ink',
            tier.color === 'safe' && 'bg-safe text-white'
          )}
        >
          {tier.label}
        </span>
      </div>

      {/* CPM å€¼ */}
      <div className="space-y-1">
        <span className="text-xs uppercase tracking-wider text-muted font-medium">
          Estimated CPM
        </span>
        <div className="flex items-baseline gap-2">
          {loading ? (
            <span className="text-4xl font-mono font-bold animate-pulse">
              $â€”.â€”â€”
            </span>
          ) : (
            <motion.span
              initial={{ scale: 0.5 }}
              animate={{ scale: 1 }}
              className="text-4xl font-mono font-bold"
            >
              ${cpm.toFixed(2)}
            </motion.span>
          )}
          <span className="text-sm text-muted">per 1,000 impressions</span>
        </div>
      </div>

      {/* Persona æ ‡ç­¾ */}
      <div className="space-y-2">
        <span className="text-xs uppercase tracking-wider text-muted font-medium flex items-center gap-1">
          <Users className="h-3 w-3" />
          Inferred Persona
        </span>
        <div className="flex flex-wrap gap-2">
          {persona.split(' / ').map((tag) => (
            <span
              key={tag}
              className="bg-highlight px-2 py-1 text-sm font-medium text-ink"
            >
              {tag}
            </span>
          ))}
        </div>
      </div>

      {/* å¯è¿½è¸ªæ€§åˆ†æ•° */}
      <div className="space-y-2">
        <div className="flex justify-between items-center">
          <span className="text-xs uppercase tracking-wider text-muted font-medium flex items-center gap-1">
            <TrendingUp className="h-3 w-3" />
            Trackability Index
          </span>
          <span
            className={cn(
              'font-mono font-bold text-xl',
              tier.color === 'danger' && 'text-danger',
              tier.color === 'warn' && 'text-warn',
              tier.color === 'safe' && 'text-safe'
            )}
          >
            {trackabilityScore}%
          </span>
        </div>

        {/* è¿›åº¦æ¡ */}
        <div className="h-3 bg-paper-dark rounded-full overflow-hidden">
          <motion.div
            initial={{ width: 0 }}
            animate={{ width: `${trackabilityScore}%` }}
            transition={{ duration: 1.5, ease: 'easeOut', delay: 0.3 }}
            className={cn('h-full rounded-full', tier.bg)}
          />
        </div>
      </div>

      {/* è¯´æ˜ */}
      <p className="text-sm text-muted border-t border-paper-dark pt-4">
        This estimate is based on RTB market data and your fingerprint entropy.
        Higher trackability = more valuable to advertisers.
      </p>
    </motion.div>
  );
}
```

### Phase 2 æ£€æŸ¥æ¸…å•

- [ ] Header/Footer å¸ƒå±€æ­£å¸¸
- [ ] RedactedText æ‚¬åœåŠ¨ç”»æµç•…
- [ ] ValuationCard æ•°æ®ç»‘å®šæ­£ç¡®
- [ ] EntropyGauge å¯è§†åŒ–æ¸…æ™°
- [ ] é¦–é¡µ Hero Section å¸å¼•çœ¼çƒ
- [ ] RTB è¿·ä½ é¢„è§ˆåŠ¨ç”»å·¥ä½œ
- [ ] æ‰«ææŒ‰é’®è§¦å‘æ­£ç¡®æµç¨‹
- [ ] ç§»åŠ¨ç«¯å“åº”å¼æ­£å¸¸

---

## Phase 3: RTB æ¨¡æ‹Ÿå™¨ & è¶…çº§ Cookie (Killer Features)

### ç›®æ ‡
å®ç°ä¸¤å¤§æ€æ‰‹çº§åŠŸèƒ½ï¼šå®Œæ•´ RTB æ‹å–æ¨¡æ‹Ÿ + HSTS è¶…çº§ Cookie æ¼”ç¤ºã€‚

### æ‰§è¡Œé¡ºåº

```
Step 3.1: RTB æ¨¡æ‹Ÿå™¨å®Œæ•´ç‰ˆ
â”œâ”€â”€ æ•°æ®æ”¶é›†é˜¶æ®µ UI
â”œâ”€â”€ å¹¿æ’­é˜¶æ®µåŠ¨ç”»
â”œâ”€â”€ å‡ºä»·æµå…¥åŠ¨ç”»
â”œâ”€â”€ è·èƒœè€…å…¬å‘Š
â””â”€â”€ æœ€ç»ˆä¼°å€¼å±•ç¤º

Step 3.2: RTB æ•°æ®å¯è§†åŒ–
â”œâ”€â”€ DataPacket æµåŠ¨ç»„ä»¶
â”œâ”€â”€ BidStream ç»„ä»¶
â”œâ”€â”€ AuctionTimeline ç»„ä»¶
â””â”€â”€ WinnerCard ç»„ä»¶

Step 3.3: HSTS è¶…çº§ Cookie
â”œâ”€â”€ Worker HSTS è·¯ç”±
â”œâ”€â”€ DNS é…ç½® (å­åŸŸå)
â”œâ”€â”€ å®¢æˆ·ç«¯è®¾ç½®å‡½æ•°
â”œâ”€â”€ å®¢æˆ·ç«¯è¯»å–å‡½æ•°
â””â”€â”€ ä¸‰æ­¥æ¼”ç¤ºæµç¨‹ UI

Step 3.4: è¶…çº§ Cookie Demo é¡µé¢
â”œâ”€â”€ StepWizard ç»„ä»¶
â”œâ”€â”€ Step 1: æ¤å…¥ ID
â”œâ”€â”€ Step 2: æ¸…é™¤æç¤º
â”œâ”€â”€ Step 3: æ­ç¤ºç»“æœ
â””â”€â”€ æŠ€æœ¯è§£é‡Šé¢æ¿

Step 3.5: é˜²å¾¡æµ‹è¯•
â”œâ”€â”€ AdBlock è¯±é¥µè„šæœ¬
â”œâ”€â”€ æµ‹è¯•ç»“æœçŸ©é˜µ
â”œâ”€â”€ åˆ†æ•°è®¡ç®—
â””â”€â”€ å»ºè®®ç”Ÿæˆ
```

### RTB æ¨¡æ‹Ÿå™¨å®Œæ•´å®ç°

```tsx
// components/rtb/rtb-simulator.tsx
'use client';

import { useState, useEffect, useCallback } from 'react';
import { motion, AnimatePresence } from 'framer-motion';
import { BidCard } from './bid-card';
import { DataPacket } from './data-packet';
import { cn } from '@/lib/utils';
import type { FingerprintPayload, RTBBid } from '@panopticlick/types';

type Phase = 'idle' | 'collecting' | 'broadcasting' | 'bidding' | 'complete';

interface RTBSimulatorProps {
  fingerprint: FingerprintPayload | null;
  onComplete?: (result: RTBSimulationResult) => void;
}

interface RTBSimulationResult {
  bids: RTBBid[];
  winningBid: RTBBid;
  estimatedCPM: number;
  persona: string;
}

export function RTBSimulator({ fingerprint, onComplete }: RTBSimulatorProps) {
  const [phase, setPhase] = useState<Phase>('idle');
  const [bids, setBids] = useState<RTBBid[]>([]);
  const [collectProgress, setCollectProgress] = useState(0);
  const [broadcastProgress, setBroadcastProgress] = useState(0);

  const startSimulation = useCallback(async () => {
    if (!fingerprint) return;

    // Phase 1: Collecting
    setPhase('collecting');
    for (let i = 0; i <= 100; i += 10) {
      setCollectProgress(i);
      await delay(150);
    }

    // Phase 2: Broadcasting
    setPhase('broadcasting');
    for (let i = 0; i <= 100; i += 5) {
      setBroadcastProgress(i);
      await delay(75);
    }

    // Phase 3: Bidding
    setPhase('bidding');

    // æ¨¡æ‹Ÿå‡ºä»· (å®é™…åº”è°ƒç”¨ API)
    const mockBids: RTBBid[] = [
      { bidder: 'The Trade Desk', amount: 0.0084, interest: 'Luxury', timestamp: Date.now() },
      { bidder: 'Meta Audience', amount: 0.0072, interest: 'Tech', timestamp: Date.now() + 100 },
      { bidder: 'Google Ads', amount: 0.0068, interest: 'Software', timestamp: Date.now() + 200 },
      { bidder: 'Amazon DSP', amount: 0.0061, interest: 'Shopping', timestamp: Date.now() + 300 },
      { bidder: 'Criteo', amount: 0.0054, interest: 'Retargeting', timestamp: Date.now() + 400 },
    ];

    // é€ä¸ªæ·»åŠ å‡ºä»·
    for (const bid of mockBids) {
      await delay(400 + Math.random() * 300);
      setBids((prev) => [...prev, bid]);
    }

    // Phase 4: Complete
    await delay(500);
    setPhase('complete');

    const sorted = [...mockBids].sort((a, b) => b.amount - a.amount);
    onComplete?.({
      bids: sorted,
      winningBid: sorted[0],
      estimatedCPM: sorted[0].amount * 1000,
      persona: 'Tech / Developer / Premium',
    });
  }, [fingerprint, onComplete]);

  useEffect(() => {
    if (fingerprint && phase === 'idle') {
      startSimulation();
    }
  }, [fingerprint, phase, startSimulation]);

  return (
    <div className="relative min-h-[500px] border-2 border-ink bg-zinc-900 text-paper p-6 font-mono overflow-hidden">
      {/* å¤´éƒ¨ */}
      <div className="flex justify-between items-center mb-6">
        <h3 className="text-highlight text-lg font-bold">
          REAL-TIME BIDDING SIMULATION
        </h3>
        <div className="flex items-center gap-2">
          {phase !== 'idle' && phase !== 'complete' && (
            <>
              <span className="h-2 w-2 rounded-full bg-green-500 animate-pulse" />
              <span className="text-xs text-zinc-400">LIVE</span>
            </>
          )}
          {phase === 'complete' && (
            <span className="text-xs text-green-400">COMPLETE</span>
          )}
        </div>
      </div>

      {/* Phase 1: Collecting */}
      <AnimatePresence mode="wait">
        {phase === 'collecting' && (
          <motion.div
            key="collecting"
            initial={{ opacity: 0 }}
            animate={{ opacity: 1 }}
            exit={{ opacity: 0 }}
            className="space-y-4"
          >
            <p className="text-zinc-300">Collecting your fingerprint signals...</p>
            <div className="h-2 bg-zinc-800 rounded-full overflow-hidden">
              <motion.div
                className="h-full bg-highlight"
                style={{ width: `${collectProgress}%` }}
              />
            </div>
            <div className="flex flex-wrap gap-2 text-xs">
              {['Canvas', 'WebGL', 'Audio', 'Fonts', 'Screen', 'Timezone'].map(
                (signal, i) => (
                  <span
                    key={signal}
                    className={cn(
                      'px-2 py-1 rounded',
                      collectProgress > i * 15
                        ? 'bg-green-500/20 text-green-400'
                        : 'bg-zinc-800 text-zinc-500'
                    )}
                  >
                    {collectProgress > i * 15 ? 'âœ“' : 'â—‹'} {signal}
                  </span>
                )
              )}
            </div>
          </motion.div>
        )}

        {/* Phase 2: Broadcasting */}
        {phase === 'broadcasting' && (
          <motion.div
            key="broadcasting"
            initial={{ opacity: 0 }}
            animate={{ opacity: 1 }}
            exit={{ opacity: 0 }}
            className="space-y-6"
          >
            <p className="text-zinc-300">
              Broadcasting your data to ad exchanges...
            </p>

            {/* æ•°æ®æµåŠ¨ç”» */}
            <div className="relative h-24 flex items-center justify-between px-4">
              <div className="bg-evidence p-3 rounded text-xs z-10">YOU</div>
              <div className="bg-zinc-700 p-3 rounded text-xs z-10">SSP</div>
              <div className="bg-zinc-700 p-3 rounded text-xs z-10">EXCHANGE</div>
              <div className="bg-zinc-700 p-3 rounded text-xs z-10">DSPs</div>

              {/* æµåŠ¨çš„æ•°æ®åŒ… */}
              <DataPacket progress={broadcastProgress} />
            </div>

            <div className="h-2 bg-zinc-800 rounded-full overflow-hidden">
              <motion.div
                className="h-full bg-evidence"
                style={{ width: `${broadcastProgress}%` }}
              />
            </div>
          </motion.div>
        )}

        {/* Phase 3 & 4: Bidding & Complete */}
        {(phase === 'bidding' || phase === 'complete') && (
          <motion.div
            key="bidding"
            initial={{ opacity: 0 }}
            animate={{ opacity: 1 }}
            className="space-y-4"
          >
            <div className="flex justify-between items-center">
              <p className="text-zinc-300">Incoming bids</p>
              <span className="text-xs text-zinc-400">
                {bids.length} bidder{bids.length !== 1 && 's'}
              </span>
            </div>

            {/* å‡ºä»·æµ */}
            <div className="space-y-2 max-h-64 overflow-y-auto">
              <AnimatePresence>
                {bids.map((bid, index) => (
                  <BidCard
                    key={bid.bidder}
                    bid={bid}
                    isWinner={
                      phase === 'complete' &&
                      index === 0 // ç¬¬ä¸€ä¸ªæ˜¯æœ€é«˜å‡ºä»·
                    }
                    delay={index * 0.1}
                  />
                ))}
              </AnimatePresence>
            </div>

            {/* è·èƒœè€…å…¬å‘Š */}
            {phase === 'complete' && bids.length > 0 && (
              <motion.div
                initial={{ opacity: 0, scale: 0.9 }}
                animate={{ opacity: 1, scale: 1 }}
                className="mt-6 p-4 bg-highlight text-ink"
              >
                <div className="text-sm font-bold mb-1">AUCTION COMPLETE</div>
                <div className="text-2xl font-bold">
                  Winning Bid: ${bids[0].amount.toFixed(4)}
                </div>
                <div className="text-sm">
                  by {bids[0].bidder} â€¢ Interest: {bids[0].interest}
                </div>
                <div className="mt-2 text-sm opacity-80">
                  Your estimated CPM value: ${(bids[0].amount * 1000).toFixed(2)}
                </div>
              </motion.div>
            )}
          </motion.div>
        )}
      </AnimatePresence>
    </div>
  );
}

function delay(ms: number) {
  return new Promise((resolve) => setTimeout(resolve, ms));
}
```

### Phase 3 æ£€æŸ¥æ¸…å•

- [ ] RTB æ¨¡æ‹Ÿå™¨å››é˜¶æ®µåŠ¨ç”»å®Œæ•´æµç•…
- [ ] å‡ºä»·å¡ç‰‡é€ä¸ªé£å…¥
- [ ] è·èƒœè€…é«˜äº®æ˜¾ç¤º
- [ ] HSTS Worker è·¯ç”±é…ç½®æ­£ç¡®
- [ ] è¶…çº§ Cookie è®¾ç½®/è¯»å–å‡½æ•°å·¥ä½œ
- [ ] ä¸‰æ­¥æ¼”ç¤ºæµç¨‹å®Œæ•´
- [ ] AdBlock è¯±é¥µè„šæœ¬æ­£ç¡®æ”¾ç½®
- [ ] é˜²å¾¡æµ‹è¯•ç»“æœæ˜¾ç¤ºæ­£ç¡®

---

## Phase 4: æ”¶å°¾ä¸å‘å¸ƒ (Polish & Launch)

### ç›®æ ‡
æ€§èƒ½ä¼˜åŒ–ã€SEOã€æ— éšœç¢ã€æœ€ç»ˆæµ‹è¯•ã€ä¸Šçº¿ã€‚

### æ‰§è¡Œé¡ºåº

```
Step 4.1: æ€§èƒ½ä¼˜åŒ–
â”œâ”€â”€ å›¾ç‰‡ä¼˜åŒ–
â”œâ”€â”€ å­—ä½“å­é›†åŒ–
â”œâ”€â”€ ä»£ç åˆ†å‰²
â”œâ”€â”€ å…³é”® CSS å†…è”
â””â”€â”€ Lighthouse å®¡è®¡

Step 4.2: SEO
â”œâ”€â”€ Meta æ ‡ç­¾é…ç½®
â”œâ”€â”€ OpenGraph å›¾ç‰‡
â”œâ”€â”€ Sitemap ç”Ÿæˆ
â”œâ”€â”€ robots.txt
â””â”€â”€ ç»“æ„åŒ–æ•°æ®

Step 4.3: æ— éšœç¢
â”œâ”€â”€ é”®ç›˜å¯¼èˆª
â”œâ”€â”€ å±å¹•é˜…è¯»å™¨æµ‹è¯•
â”œâ”€â”€ é¢œè‰²å¯¹æ¯”åº¦
â”œâ”€â”€ Focus çŠ¶æ€
â””â”€â”€ ARIA æ ‡ç­¾

Step 4.4: æœ€ç»ˆæµ‹è¯•
â”œâ”€â”€ è·¨æµè§ˆå™¨æµ‹è¯•
â”œâ”€â”€ ç§»åŠ¨è®¾å¤‡æµ‹è¯•
â”œâ”€â”€ API å‹åŠ›æµ‹è¯•
â”œâ”€â”€ å®‰å…¨å®¡è®¡
â””â”€â”€ GDPR åˆè§„æ£€æŸ¥

Step 4.5: å‘å¸ƒ
â”œâ”€â”€ DNS é…ç½®
â”œâ”€â”€ SSL è¯ä¹¦
â”œâ”€â”€ Cloudflare è®¾ç½®
â”œâ”€â”€ ç›‘æ§é…ç½®
â””â”€â”€ æ­£å¼ä¸Šçº¿
```

### SEO é…ç½®

```tsx
// app/layout.tsx
import type { Metadata } from 'next';

export const metadata: Metadata = {
  metadataBase: new URL('https://panopticlick.org'),
  title: {
    default: 'Panopticlick | Deconstruct Your Digital Shadow',
    template: '%s | Panopticlick',
  },
  description:
    'Is your browser safe against tracking? Run the EFF-inspired privacy analysis. See exactly what advertisers know about you and how much your data is worth.',
  keywords: [
    'browser fingerprint',
    'privacy test',
    'tracking',
    'digital privacy',
    'EFF',
    'ad tracking',
    'RTB',
    'supercookie',
  ],
  authors: [{ name: 'Panopticlick Project' }],
  creator: 'Panopticlick',
  publisher: 'Panopticlick',
  formatDetection: {
    email: false,
    address: false,
    telephone: false,
  },
  openGraph: {
    type: 'website',
    locale: 'en_US',
    url: 'https://panopticlick.org',
    title: 'Panopticlick | Deconstruct Your Digital Shadow',
    description:
      'Discover what advertisers know about you and how much your data is worth on the open market.',
    siteName: 'Panopticlick',
    images: [
      {
        url: '/og-image.png',
        width: 1200,
        height: 630,
        alt: 'Panopticlick - Browser Privacy Analysis',
      },
    ],
  },
  twitter: {
    card: 'summary_large_image',
    title: 'Panopticlick | Deconstruct Your Digital Shadow',
    description: 'Is your browser safe against tracking?',
    images: ['/og-image.png'],
    creator: '@panopticlick',
  },
  robots: {
    index: true,
    follow: true,
    googleBot: {
      index: true,
      follow: true,
      'max-video-preview': -1,
      'max-image-preview': 'large',
      'max-snippet': -1,
    },
  },
  verification: {
    google: 'YOUR_GOOGLE_VERIFICATION_CODE',
  },
};
```

### Phase 4 æ£€æŸ¥æ¸…å•

- [ ] Lighthouse Performance > 90
- [ ] Lighthouse Accessibility > 90
- [ ] Lighthouse SEO > 90
- [ ] Core Web Vitals å…¨ç»¿
- [ ] æ‰€æœ‰é¡µé¢æœ‰æ­£ç¡®çš„ Meta æ ‡ç­¾
- [ ] OpenGraph é¢„è§ˆæ­£ç¡®
- [ ] é”®ç›˜å¯å®Œå…¨å¯¼èˆª
- [ ] ç§»åŠ¨ç«¯ä½“éªŒæµç•…
- [ ] DNS è§£ææ­£ç¡®
- [ ] SSL è¯ä¹¦æœ‰æ•ˆ
- [ ] ç›‘æ§å‘Šè­¦é…ç½®å®Œæˆ

---

## å¼€å‘ä¾èµ–é¡ºåºå›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ä¾èµ–å…³ç³»å›¾                                      â”‚
â”‚                                                                          â”‚
â”‚                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚                        â”‚   Phase 0   â”‚                                  â”‚
â”‚                        â”‚  Foundation â”‚                                  â”‚
â”‚                        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                               â”‚                                          â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚              â”‚                â”‚                â”‚                        â”‚
â”‚              â–¼                â–¼                â–¼                        â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚     â”‚ packages/types â”‚ â”‚ D1 Schema  â”‚ â”‚ Design System  â”‚               â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚             â”‚                â”‚                â”‚                        â”‚
â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                              â”‚                                          â”‚
â”‚                              â–¼                                          â”‚
â”‚                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚                        â”‚   Phase 1   â”‚                                  â”‚
â”‚                        â”‚    Core     â”‚                                  â”‚
â”‚                        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                               â”‚                                          â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚              â”‚                â”‚                â”‚                        â”‚
â”‚              â–¼                â–¼                â–¼                        â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚     â”‚ Fingerprint SDKâ”‚ â”‚ Valuation  â”‚ â”‚ Worker Routes  â”‚               â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚             â”‚                â”‚                â”‚                        â”‚
â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                              â”‚                                          â”‚
â”‚                              â–¼                                          â”‚
â”‚                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚                        â”‚   Phase 2   â”‚                                  â”‚
â”‚                        â”‚   Mirror    â”‚                                  â”‚
â”‚                        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                               â”‚                                          â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚              â”‚                â”‚                â”‚                        â”‚
â”‚              â–¼                â–¼                â–¼                        â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚     â”‚ Redacted UI    â”‚ â”‚ Valuation  â”‚ â”‚  Scan Flow     â”‚               â”‚
â”‚     â”‚ Components     â”‚ â”‚ Components â”‚ â”‚  Integration   â”‚               â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚             â”‚                â”‚                â”‚                        â”‚
â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                              â”‚                                          â”‚
â”‚                              â–¼                                          â”‚
â”‚                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚                        â”‚   Phase 3   â”‚                                  â”‚
â”‚                        â”‚   Killers   â”‚                                  â”‚
â”‚                        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                               â”‚                                          â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚         â”‚                     â”‚                     â”‚                   â”‚
â”‚         â–¼                     â–¼                     â–¼                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ RTB Full    â”‚     â”‚ HSTS Supercookieâ”‚     â”‚ Defense     â”‚            â”‚
â”‚  â”‚ Simulator   â”‚     â”‚ Demo           â”‚     â”‚ Testing     â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚         â”‚                    â”‚                     â”‚                   â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                              â”‚                                          â”‚
â”‚                              â–¼                                          â”‚
â”‚                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚                        â”‚   Phase 4   â”‚                                  â”‚
â”‚                        â”‚   Launch    â”‚                                  â”‚
â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å¹¶è¡Œå¼€å‘å»ºè®®

### å¯å¹¶è¡Œçš„ä»»åŠ¡ç»„

```
Group A (Frontend Core):
â”œâ”€â”€ Layout components
â”œâ”€â”€ Redacted components
â”œâ”€â”€ Valuation components
â””â”€â”€ Defense components

Group B (SDK & Engine):
â”œâ”€â”€ Fingerprint collectors
â”œâ”€â”€ Hash utilities
â”œâ”€â”€ Entropy calculation
â””â”€â”€ RTB simulation

Group C (Backend):
â”œâ”€â”€ Worker routes
â”œâ”€â”€ D1 schema & migrations
â”œâ”€â”€ KV configuration
â””â”€â”€ HSTS subdomain setup

æ¨èå›¢é˜Ÿåˆ†å·¥:
- 1äºº: Group A (Frontend)
- 1äºº: Group B (SDK)
- 1äºº: Group C (Backend)
```

### å…³é”®è·¯å¾„ (Critical Path)

```
Types â†’ Fingerprint SDK â†’ Worker /scan/collect â†’ Homepage Integration
                                    â†“
                              RTB Simulator
                                    â†“
                              HSTS Demo
```

**è¿™æ¡è·¯å¾„ä¸Šçš„ä»»ä½•å»¶è¿Ÿéƒ½ä¼šå½±å“æ•´ä½“è¿›åº¦ã€‚**
